(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{174:function(t,e,r){"use strict";r.r(e);var s=r(0),n=Object(s.a)({},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),r("ul",[r("li",[t._v("安装软件开发包 "),r("a",{attrs:{href:"https://dotnet.microsoft.com/download/dotnet-core/2.2",target:"_blank",rel:"noopener noreferrer"}},[t._v(".NET Core SDK 2.2"),r("OutboundLink")],1)]),t._v(" "),r("li",[t._v("安装开发工具  "),r("a",{attrs:{href:"https://visualstudio.microsoft.com/zh-hans/vs/?rr=https%3A%2F%2Fcn.bing.com%2F",target:"_blank",rel:"noopener noreferrer"}},[t._v("Visual Studio 2019"),r("OutboundLink")],1)]),t._v(" "),r("li",[t._v("安装MySQL（version： 5.6+,别装8.0+，未测试）")])]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._m(4),t._v(" "),r("p",[t._v("文件位置src/LinCms.Web/appsettings.json，当数据库中存储表情包是，Charset为utf8mb4")]),t._v(" "),t._m(5),t._v(" "),t._m(6),t._m(7),t._v(" "),r("p",[t._v("该项目使用"),r("a",{attrs:{href:"https://github.com/2881099/FreeSql",target:"_blank",rel:"noopener noreferrer"}},[t._v("FreeSql"),r("OutboundLink")],1),t._v("，默认自动迁移数据表结构，"),r("strong",[t._v("需要自己创建数据库，名字为LinCms")]),t._v("，无须用户操作，但无数据，而且只有访问到表时才会创建某个表，所以用户可将"),r("a",{attrs:{href:"https://github.com/luoyunchong/lin-cms-dotnetcore/blob/master/docs/sql/lincms.sql",target:"_blank",rel:"noopener noreferrer"}},[t._v("备份SQL"),r("OutboundLink")],1),t._v("放到Mysql中生成，还原表结构及数据。")]),t._v(" "),t._m(8),t._v(" "),r("p",[t._v("使用vscode打开项目，")]),t._v(" "),t._m(9),t._v(" "),t._m(10),t._m(11),t._v(" "),t._m(12),t._m(13),t._v(" "),t._m(14),r("p",[t._v("这时候打开 https://localhost:5001/swagger/index.html，即可看到swagger页面。")]),t._v(" "),t._m(15),t._v(" "),r("p",[t._v("双击lin-cms-dotnetcore.sln即可使用vs2019打开项目。右键解决方案，点击生成解决方案，然后,再单击LinCms .Web，即可自动启动后台服务。")]),t._v(" "),t._m(16),t._v(" "),r("p",[t._v("会打开浏览器，访问"),r("a",{attrs:{href:"https://localhosst:5001/swagger/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://localhosst:5001/swagger/index.html"),r("OutboundLink")],1),t._v("，会看到swagger的文档。")]),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://blog.igeekfan.cn/2019/06/09/dotnetcore/ASP.NET-Core-Deploy-To-Ubuntu/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://blog.igeekfan.cn/2019/06/09/dotnetcore/ASP.NET-Core-Deploy-To-Ubuntu/"),r("OutboundLink")],1)])]),t._v(" "),t._m(19),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://blog.igeekfan.cn/2019/06/09/dotnetcore/ASP.NET-Core-Deploy-To-Docker-Ubuntu/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://blog.igeekfan.cn/2019/06/09/dotnetcore/ASP.NET-Core-Deploy-To-Docker-Ubuntu/"),r("OutboundLink")],1)])]),t._v(" "),t._m(20),t._v(" "),r("p",[t._v("因为该项目基于IdentityServer4,实现的授权认证服务，")]),t._v(" "),t._m(21),t._v(" "),r("p",[t._v("Startup.cs")]),t._v(" "),t._m(22),r("p",[t._v("appsettings.Production.json")]),t._v(" "),t._m(23),t._m(24),t._v(" "),r("p",[t._v("官网下载并安装OpenSSL "),r("a",{attrs:{href:"https://slproweb.com/products/Win32OpenSSL.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("OpenSSL官网"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("下载 Win64 OpenSSL v1.1.1b 版本")]),t._v(" "),r("p",[t._v("在OpenSSL的bin文件夹，以管理员身份打开CMD执行以下命令：")]),t._v(" "),t._m(25),r("p",[t._v("下面将生成的证书和Key封装成一个文件，以便IdentityServer可以使用它们去正确地签名tokens")]),t._v(" "),t._m(26),t._m(27),t._v(" "),r("p",[t._v("这个 密码与appsettings.Production.json配置项相同。")]),t._v(" "),r("p",[t._v("发布时，把ids4.pfx，放到项目根目录")]),t._v(" "),t._m(28),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.cnblogs.com/guolianyu/p/9872661.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("IdentityServer4之JWT签名(RSA加密证书)及验签"),r("OutboundLink")],1)])]),t._v(" "),r("RightMenu")],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"后端准备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#后端准备","aria-hidden":"true"}},[this._v("#")]),this._v(" 后端准备")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"server-端必备环境"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#server-端必备环境","aria-hidden":"true"}},[this._v("#")]),this._v(" Server 端必备环境")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"获取工程项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#获取工程项目","aria-hidden":"true"}},[this._v("#")]),this._v(" 获取工程项目")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[this._v("git")]),this._v(" clone https://github.com/luoyunchong/lin-cms-dotnetcore.git\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"数据库配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据库配置","aria-hidden":"true"}},[this._v("#")]),this._v(" 数据库配置")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("strong",[this._v("请务必根据自己的实际情况修改此配置项")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"language-json extra-class"},[r("pre",{pre:!0,attrs:{class:"language-json"}},[r("code",[r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ConnectionStrings"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Default"')]),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Data Source=127.0.0.1;Port=3306;User ID=root;Password=123456;Initial Catalog=LinCms;Charset=utf8;SslMode=none;Max pool size=10"')]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"数据迁移"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据迁移","aria-hidden":"true"}},[this._v("#")]),this._v(" 数据迁移")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_1-vscode命令行运行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-vscode命令行运行","aria-hidden":"true"}},[this._v("#")]),this._v(" 1.vscode命令行运行")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"切换到lincms-web目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#切换到lincms-web目录","aria-hidden":"true"}},[this._v("#")]),this._v(" 切换到LinCms.Web目录")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v(" D:\\code\\github\\lin-cms-dotnetcore> cd src\\LinCms.Web\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"编译、安装依赖包"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#编译、安装依赖包","aria-hidden":"true"}},[this._v("#")]),this._v(" 编译、安装依赖包")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("D:\\code\\github\\lin-cms-dotnetcore\\src\\LinCms.Web> dotnet build\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"运行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行","aria-hidden":"true"}},[this._v("#")]),this._v(" 运行")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("D:\\code\\github\\lin-cms-dotnetcore\\src\\LinCms.Web> dotnet run watch\nNow listening on: https://localhost:5001\nNow listening on: http://localhost:5000\nApplication started. Press Ctrl+C to shut down.\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_2-visual-studio-2019运行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-visual-studio-2019运行","aria-hidden":"true"}},[this._v("#")]),this._v(" 2.visual studio 2019运行")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"https://ae01.alicdn.com/kf/H70086026eaca4dc8ab4806ee1d07443bP.jpg",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"https://ae01.alicdn.com/kf/He52bc4d3708242d2995419bb584e1f53Q.jpg",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"部署至linux-ubuntu16-06"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部署至linux-ubuntu16-06","aria-hidden":"true"}},[this._v("#")]),this._v(" 部署至linux(Ubuntu16.06)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"部署至docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部署至docker","aria-hidden":"true"}},[this._v("#")]),this._v(" 部署至Docker")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"部署前准备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#部署前准备","aria-hidden":"true"}},[this._v("#")]),this._v(" 部署前准备")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("开发阶段使用"),e("code",[this._v("AddDeveloperSigningCredential()")]),this._v("方法即可完成签名认证，但是在生产环境，我们必须使用"),e("code",[this._v("AddSigningCredential()")]),this._v("方法并且使用OpenSSL生成自己的签名证书")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('            services.AddIdentityServer()\n#if  DEBUG\n                .AddDeveloperSigningCredential()\n#endif\n#if !DEBUG\n                .AddSigningCredential(new X509Certificate2(Path.Combine(AppContext.BaseDirectory,\n                        Configuration["Certificates:Path"]),\n                    Configuration["Certificates:Password"]))\n#endif\n                .AddInMemoryIdentityResources(InMemoryConfiguration.GetIdentityResources())\n                .AddInMemoryApiResources(InMemoryConfiguration.GetApis())\n                .AddInMemoryClients(InMemoryConfiguration.GetClients())\n                .AddProfileService<LinCmsProfileService>()\n                .AddResourceOwnerValidator<LinCmsResourceOwnerPasswordValidator>();\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v('{\n    "Certificates":\n    {\n        "Path":"ids4.pfx",\n        "Password":"123qwe"\n    }\n}\n')])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"使用openssl生成证书"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用openssl生成证书","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用OpenSSL生成证书")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("openssl req -newkey rsa:2048 -nodes -keyout ids4.key -x509 -days 365 -out ids4.cer\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("openssl pkcs12 -export -in ids4.cer -inkey ids4.key -out ids4.pfx \n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h5",{attrs:{id:"注：在生成的过程中会让我们输入export-password"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注：在生成的过程中会让我们输入export-password","aria-hidden":"true"}},[this._v("#")]),this._v(" (注：在生成的过程中会让我们输入Export Password)")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考")])}],!1,null,null,null);e.default=n.exports}}]);